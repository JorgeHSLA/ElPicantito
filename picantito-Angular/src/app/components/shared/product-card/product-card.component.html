<div class="card taco-card h-100 border-0 shadow-sm overflow-hidden position-relative" (click)="onVerProducto()">
    <div class="row g-0 h-100">
        <div class="col-12">
            <div class="card-img-container position-relative" style="height: 200px;">
                <img #img [src]="producto.imagen" class="card-img-top w-100 h-100" style="object-fit: cover;" [alt]="producto.nombre">
                <!-- Badge de disponibilidad -->
                @if (!producto.disponible) {
                <span class="position-absolute top-0 end-0 badge bg-secondary m-2">
            Agotado
          </span> }
            </div>
            <div class="card-body d-flex flex-column">
                <!-- Rating -->
                <div class="rating mb-2">
                    @for (star of getStarsArray(producto.calificacion); track star) {
                    <i class="bi bi-star-fill text-warning"></i> } @for (star of getEmptyStarsArray(producto.calificacion); track star) {
                    <i class="bi bi-star text-muted"></i> }
                </div>
                <h5 class="card-title fw-bold">{{ producto.nombre }}</h5>
                <p class="card-text text-muted flex-grow-1">{{ producto.descripcion }}</p>
                <div class="price-and-action">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="price">
                            <span class="h5 mb-0 text-success fw-bold">${{ (producto.precio ?? producto.precioDeVenta ?? 0) | number:'1.2-2' }}</span>
                        </div>
                        <div class="action-buttons">
                            @if (producto.disponible) {
                            <button (click)="onVerProducto(); $event.stopPropagation()" class="btn btn-sm" style="background-color: #ff6b35; border-color: #ff6b35; color: white; font-weight: 500;">
                                <i class="bi bi-eye me-1"></i>Ver Detalles
                            </button> } @else {
                            <button class="btn btn-secondary btn-sm" disabled (click)="$event.stopPropagation()">
                  <i class="bi bi-x-circle me-1"></i>Agotado
                </button> }
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
